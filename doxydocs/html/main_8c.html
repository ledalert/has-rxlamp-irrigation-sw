<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Irrigation test system 1: src/main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Irrigation test system 1
   </div>
   <div id="projectbrief">Code for using rxlamp v0.90 as irrigation controller</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Irrigation controller main file.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;math.h&quot;</code><br />
<code>#include &quot;ws2812_macro.h&quot;</code><br />
<code>#include &quot;usart_macro.h&quot;</code><br />
<code>#include &quot;led_macro.h&quot;</code><br />
<code>#include &quot;timer_macro.h&quot;</code><br />
<code>#include &quot;systick.h&quot;</code><br />
<code>#include &quot;adc.h&quot;</code><br />
<code>#include &quot;time.h&quot;</code><br />
<code>#include &quot;filter.h&quot;</code><br />
<code>#include &quot;<a class="el" href="irrigation_8h_source.html">irrigation.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main.c:</div>
<div class="dyncontent">
<div class="center"><img src="main_8c__incl.png" border="0" usemap="#src_2main_8c" alt=""/></div>
<map name="src_2main_8c" id="src_2main_8c">
<area shape="rect" id="node2" href="math_8h_source.html" title="math.h" alt="" coords="607,155,675,181"/><area shape="rect" id="node3" href="ws2812__macro_8h_source.html" title="ws2812_macro.h" alt="" coords="238,80,369,107"/><area shape="rect" id="node14" href="timer__macro_8h_source.html" title="timer_macro.h" alt="" coords="140,155,256,181"/><area shape="rect" id="node15" href="usart__macro_8h_source.html" title="usart_macro.h" alt="" coords="393,80,507,107"/><area shape="rect" id="node18" href="led__macro_8h_source.html" title="led_macro.h" alt="" coords="582,80,683,107"/><area shape="rect" id="node19" href="systick_8h_source.html" title="systick.h" alt="" coords="873,80,950,107"/><area shape="rect" id="node22" href="adc_8h_source.html" title="adc.h" alt="" coords="920,229,977,256"/><area shape="rect" id="node24" href="time_8h_source.html" title="time.h" alt="" coords="724,155,787,181"/><area shape="rect" id="node25" href="filter_8h_source.html" title="filter.h" alt="" coords="975,80,1037,107"/><area shape="rect" id="node26" href="irrigation_8h.html" title="Irrigation main include file. " alt="" coords="707,80,798,107"/><area shape="rect" id="node4" href="ws2812_8h_source.html" title="ws2812.h" alt="" coords="414,155,497,181"/><area shape="rect" id="node13" href="gpio__macro_8h_source.html" title="gpio_macro.h" alt="" coords="281,155,390,181"/><area shape="rect" id="node5" href="gpio_8h_source.html" title="gpio.h" alt="" coords="425,229,486,256"/><area shape="rect" id="node9" href="timer_8h_source.html" title="timer.h" alt="" coords="275,229,343,256"/><area shape="rect" id="node11" href="dma_8h_source.html" title="dma.h" alt="" coords="511,229,573,256"/><area shape="rect" id="node6" href="hw_8h.html" title="Hardware abstraction layer include file. " alt="" coords="629,304,679,331"/><area shape="rect" id="node16" href="uart_8h_source.html" title="uart.h" alt="" coords="521,155,581,181"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structstate.html">state</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:abedacb9f24c8951e3091cbbb69e35b9f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abedacb9f24c8951e3091cbbb69e35b9f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>NTC_Filter_Size</b>&#160;&#160;&#160;250</td></tr>
<tr class="separator:abedacb9f24c8951e3091cbbb69e35b9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa423cbe2bea57704cca655826b2338c1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa423cbe2bea57704cca655826b2338c1"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>GPIO_PORT_INSTANCE</b> (GPIO_PA, GPIOA, RCC_GPIOA)</td></tr>
<tr class="separator:aa423cbe2bea57704cca655826b2338c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abebbe5a8f2ebcfc52329af1a2a452c32"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abebbe5a8f2ebcfc52329af1a2a452c32"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>GPIO_PORT_INSTANCE</b> (GPIO_PB, GPIOB, RCC_GPIOB)</td></tr>
<tr class="separator:abebbe5a8f2ebcfc52329af1a2a452c32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab051ec5725126430e405e5a598ccfe70"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab051ec5725126430e405e5a598ccfe70"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>WS2812_INSTANCE</b> (StatusLED, TIMER1_CCR3N_DMA,&amp;GPIO_PB, GPIO15, 1)</td></tr>
<tr class="separator:ab051ec5725126430e405e5a598ccfe70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80f5b1b0fc5eac69c761e7388600dc59"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a80f5b1b0fc5eac69c761e7388600dc59"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>USART_TXONLY_INSTANCE</b> (Serial, USART1, RCC_USART1, 921600, 0, 0, 0, 0,&amp;GPIO_PA, GPIO_USART1_TX)</td></tr>
<tr class="separator:a80f5b1b0fc5eac69c761e7388600dc59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a853c3748541a5efcdc0a0aef2a523eb9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a853c3748541a5efcdc0a0aef2a523eb9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>TIMER_CCR_INSTANCE</b> (Pump,&amp;GPIO_PB, GPIO_MODE_OUTPUT_2_MHZ, GPIO_CNF_OUTPUT_ALTFN_PUSHPULL, GPIO0, TIMER3_CCR3, 4095, 0)</td></tr>
<tr class="separator:a853c3748541a5efcdc0a0aef2a523eb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9454d469f767dc72f29f51487317ba6d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9454d469f767dc72f29f51487317ba6d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>TIMER_CCR_INSTANCE</b> (Heater,&amp;GPIO_PA, GPIO_MODE_OUTPUT_2_MHZ, GPIO_CNF_OUTPUT_ALTFN_PUSHPULL, GPIO2, TIMER2_CCR3, 4095, 0)</td></tr>
<tr class="separator:a9454d469f767dc72f29f51487317ba6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f98adee46907f4bd29dc153ce25dcb7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1f98adee46907f4bd29dc153ce25dcb7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>GAMMA_LUT_8_8_E_INSTANCE</b> (LED_Gamma)</td></tr>
<tr class="separator:a1f98adee46907f4bd29dc153ce25dcb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ffc4d6ea2a7a8039f889967b7a7d7e3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3ffc4d6ea2a7a8039f889967b7a7d7e3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>GPIO_PIN_INSTANCE</b> (NTC_pin,&amp;GPIO_PA, GPIO_MODE_INPUT, GPIO_CNF_INPUT_ANALOG, GPIO3)</td></tr>
<tr class="separator:a3ffc4d6ea2a7a8039f889967b7a7d7e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabae29cd362c0001a2b417c9206cb330"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#aabae29cd362c0001a2b417c9206cb330">hw_init_state</a> (enum <a class="el" href="hw_8h.html#a3c02952100e7d051b77cdf060ca0ba9b">hw_init_state</a> <a class="el" href="structstate.html">state</a>)</td></tr>
<tr class="memdesc:aabae29cd362c0001a2b417c9206cb330"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function prototype calls all perhipherals with the state as argument.  <a href="#aabae29cd362c0001a2b417c9206cb330">More...</a><br /></td></tr>
<tr class="separator:aabae29cd362c0001a2b417c9206cb330"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdd94f850b193691f1bfc60c724b542a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afdd94f850b193691f1bfc60c724b542a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>sys_tick_handler</b> (void)</td></tr>
<tr class="separator:afdd94f850b193691f1bfc60c724b542a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42ca7c9b89c22fcd9ec9aeed3e96b6c4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a42ca7c9b89c22fcd9ec9aeed3e96b6c4"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>get_system_time_blocking</b> (struct <a class="el" href="structsw__timer__system__time.html">sw_timer_system_time</a> *result)</td></tr>
<tr class="separator:a42ca7c9b89c22fcd9ec9aeed3e96b6c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e3d66f43880efbd56cc2f68347b9b19"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8e3d66f43880efbd56cc2f68347b9b19"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>dma1_channel1_isr</b> (void)</td></tr>
<tr class="separator:a8e3d66f43880efbd56cc2f68347b9b19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6440cc6e50bc4445698e203198648185"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6440cc6e50bc4445698e203198648185"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>status_color</b> (int r, int g, int b)</td></tr>
<tr class="separator:a6440cc6e50bc4445698e203198648185"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8505b37986de5265d35fdaa3569b9af"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab8505b37986de5265d35fdaa3569b9af"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>usart_blocking_tm</b> (struct <a class="el" href="structusart.html">usart</a> *<a class="el" href="structusart.html">usart</a>, struct <a class="el" href="structsw__timer__system__time.html">sw_timer_system_time</a> *<a class="el" href="structtm.html">tm</a>)</td></tr>
<tr class="separator:ab8505b37986de5265d35fdaa3569b9af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85b9fa287bbc4012266648cbfe73ef47"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a85b9fa287bbc4012266648cbfe73ef47"></a>
struct <a class="el" href="structstate.html">state</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>get_state</b> (enum <a class="el" href="irrigation_8h.html#ac40bd72ec6942e213e454ebcacc92dc7">irrigation_status</a> status)</td></tr>
<tr class="separator:a85b9fa287bbc4012266648cbfe73ef47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a095a7fe46cf30b7abfbc4aac4b02c257"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a095a7fe46cf30b7abfbc4aac4b02c257"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>report_current_temperature</b> (struct <a class="el" href="structirrigation__controller.html">irrigation_controller</a> *controller)</td></tr>
<tr class="separator:a095a7fe46cf30b7abfbc4aac4b02c257"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d729620635ca5fd1fe6d397b013ad06"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2d729620635ca5fd1fe6d397b013ad06"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>report_validation_temperatures</b> (struct <a class="el" href="structirrigation__controller.html">irrigation_controller</a> *controller)</td></tr>
<tr class="separator:a2d729620635ca5fd1fe6d397b013ad06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a328fcba3c5cf7d17f02b4c5b76495653"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a328fcba3c5cf7d17f02b4c5b76495653"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>report_sensor_malfunction</b> (struct <a class="el" href="structirrigation__controller.html">irrigation_controller</a> *controller)</td></tr>
<tr class="separator:a328fcba3c5cf7d17f02b4c5b76495653"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe20ef6128c561c493413063e7924081"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afe20ef6128c561c493413063e7924081"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>report_sensor_fluctuations</b> (struct <a class="el" href="structirrigation__controller.html">irrigation_controller</a> *controller)</td></tr>
<tr class="separator:afe20ef6128c561c493413063e7924081"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8259bbc867800edd5b8dc218f1a6693"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae8259bbc867800edd5b8dc218f1a6693"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>report_msg_note</b> (struct <a class="el" href="structirrigation__controller.html">irrigation_controller</a> *controller, char *msg)</td></tr>
<tr class="separator:ae8259bbc867800edd5b8dc218f1a6693"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ce529588e4fc671f721721ca40e9f2e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4ce529588e4fc671f721721ca40e9f2e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>report_measurement_data</b> (struct <a class="el" href="structirrigation__controller.html">irrigation_controller</a> *controller, char *msg)</td></tr>
<tr class="separator:a4ce529588e4fc671f721721ca40e9f2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4fb87b3684142c82865003df813ef052"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structsystick__config.html">systick_config</a>&#160;</td><td class="memItemRight" valign="bottom"><b>Systick_config</b></td></tr>
<tr class="separator:a4fb87b3684142c82865003df813ef052"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d0d8fb8a23aac2b6ac6d9e81e7b58e2"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structsystick.html">systick</a>&#160;</td><td class="memItemRight" valign="bottom"><b>Systick</b></td></tr>
<tr class="separator:a8d0d8fb8a23aac2b6ac6d9e81e7b58e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9036c54a901bdc13978408f1babe6f78"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structadc__config.html">adc_config</a>&#160;</td><td class="memItemRight" valign="bottom"><b>NTC_adc_config</b></td></tr>
<tr class="separator:a9036c54a901bdc13978408f1babe6f78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58930016c740c92d9007715fd9262f27"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a58930016c740c92d9007715fd9262f27"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>NTC_buffer</b> [1]</td></tr>
<tr class="separator:a58930016c740c92d9007715fd9262f27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab08aed4305f11ea61ea2ac93a524d34b"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structadc.html">adc</a>&#160;</td><td class="memItemRight" valign="bottom"><b>NTC_adc</b></td></tr>
<tr class="separator:ab08aed4305f11ea61ea2ac93a524d34b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5333e724c49577c06758ac990228568b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5333e724c49577c06758ac990228568b"></a>
volatile uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>NTC_filter_buffer</b> [NTC_Filter_Size]</td></tr>
<tr class="separator:a5333e724c49577c06758ac990228568b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0e81558ffe64a96a635a1a6af8ad8bd"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structfilter__rms.html">filter_rms</a>&#160;</td><td class="memItemRight" valign="bottom"><b>NTC_filter</b></td></tr>
<tr class="separator:ab0e81558ffe64a96a635a1a6af8ad8bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6626ba12fbadd1981081605f892a7bb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad6626ba12fbadd1981081605f892a7bb"></a>
volatile int&#160;</td><td class="memItemRight" valign="bottom"><b>sleep_ms</b> = 0</td></tr>
<tr class="separator:ad6626ba12fbadd1981081605f892a7bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d39b8e4f9506f28e2bdff70929287f6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2d39b8e4f9506f28e2bdff70929287f6"></a>
volatile int&#160;</td><td class="memItemRight" valign="bottom"><b>NTC_filtered_value</b> = -1</td></tr>
<tr class="separator:a2d39b8e4f9506f28e2bdff70929287f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d12c8106f421683f94175dd1c572624"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9d12c8106f421683f94175dd1c572624"></a>
volatile struct <a class="el" href="structsw__timer__system__time.html">sw_timer_system_time</a>&#160;</td><td class="memItemRight" valign="bottom"><b>system_time</b> = {1420070400, 0}</td></tr>
<tr class="separator:a9d12c8106f421683f94175dd1c572624"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a153e3e14841d1967017a21ab4feacc19"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a153e3e14841d1967017a21ab4feacc19"></a>
volatile bool&#160;</td><td class="memItemRight" valign="bottom"><b>system_time_updated</b> =0</td></tr>
<tr class="separator:a153e3e14841d1967017a21ab4feacc19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82cbd1bddefe1e9d0229cb36b068ec6d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a82cbd1bddefe1e9d0229cb36b068ec6d"></a>
const struct <a class="el" href="structstate.html">state</a>&#160;</td><td class="memItemRight" valign="bottom"><b>state_init</b> = {<a class="el" href="group__state__init.html#gaeca2f683660bf42f5258acd6aac353d0">state_init_enter</a>, <a class="el" href="group__state__init.html#ga5b5f5a7ec8534a643fb599efdee6ed4f">state_init_run</a>, <a class="el" href="group__state__init.html#ga52863e306edb45d15c12acdecb7e5555">state_init_exit</a>, &quot;Init&quot;}</td></tr>
<tr class="separator:a82cbd1bddefe1e9d0229cb36b068ec6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5282fd583ec6d89886f7f7790721e29"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af5282fd583ec6d89886f7f7790721e29"></a>
const struct <a class="el" href="structstate.html">state</a>&#160;</td><td class="memItemRight" valign="bottom"><b>state_validate</b> = {<a class="el" href="group__state__validate.html#gac0d41d4685bd461b3a613f6320405b79">state_validate_enter</a>, <a class="el" href="group__state__validate.html#gaec38509b93f8a850919aa7a36e543ed5">state_validate_run</a>, <a class="el" href="group__state__validate.html#gac480e756742ffd9acd9bd21ac1e8885c">state_validate_exit</a>, &quot;Validate temperature sensor&quot;}</td></tr>
<tr class="separator:af5282fd583ec6d89886f7f7790721e29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc9312d41f1b93fd44e0cdad05313483"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abc9312d41f1b93fd44e0cdad05313483"></a>
const struct <a class="el" href="structstate.html">state</a>&#160;</td><td class="memItemRight" valign="bottom"><b>state_reboot</b> = {state_reboot_enter, state_reboot_run, state_reboot_exit, &quot;Reboot&quot;}</td></tr>
<tr class="separator:abc9312d41f1b93fd44e0cdad05313483"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ce37ea920e9b7c6b383d70fe40233e7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3ce37ea920e9b7c6b383d70fe40233e7"></a>
const struct <a class="el" href="structstate.html">state</a>&#160;</td><td class="memItemRight" valign="bottom"><b>state_measure</b> = {state_measure_enter, state_measure_run, state_measure_exit, &quot;Measure soil water content&quot;}</td></tr>
<tr class="separator:a3ce37ea920e9b7c6b383d70fe40233e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c433a8720f4e75971c7f216723aba26"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structirrigation__controller.html">irrigation_controller</a>&#160;</td><td class="memItemRight" valign="bottom"><b>ic</b></td></tr>
<tr class="separator:a2c433a8720f4e75971c7f216723aba26"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Irrigation controller main file. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>systick, adc, moisture sensor, pwm output, filter</dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aabae29cd362c0001a2b417c9206cb330"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="hw_8h.html#a3c02952100e7d051b77cdf060ca0ba9b">hw_init_state</a> </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="hw_8h.html#a3c02952100e7d051b77cdf060ca0ba9b">hw_init_state</a>&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function prototype calls all perhipherals with the state as argument. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a2c433a8720f4e75971c7f216723aba26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structirrigation__controller.html">irrigation_controller</a> ic</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .events = {</div>
<div class="line">        .report_validation_temperatures = report_validation_temperatures,</div>
<div class="line">        .report_sensor_malfunction = report_sensor_malfunction,</div>
<div class="line">        .report_sensor_fluctuations = report_sensor_fluctuations,</div>
<div class="line">        .report_current_temperature = report_current_temperature,</div>
<div class="line">        .report_msg_note = report_msg_note,</div>
<div class="line">        .report_measurement_data = report_measurement_data,</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab08aed4305f11ea61ea2ac93a524d34b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structadc.html">adc</a> NTC_adc</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .configuration = &amp;NTC_adc_config,</div>
<div class="line">    .adc_buffer = NTC_buffer,</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9036c54a901bdc13978408f1babe6f78"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structadc__config.html">adc_config</a> NTC_adc_config</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .channel_map = &amp;(uint8_t){3},</div>
<div class="line">    .channel_count = 1,</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab0e81558ffe64a96a635a1a6af8ad8bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structfilter__rms.html">filter_rms</a> NTC_filter</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .buffer = NTC_filter_buffer,</div>
<div class="line">    .size = NTC_Filter_Size,</div>
<div class="line">    .valid_range = {    </div>
<div class="line">        .min = 1200,</div>
<div class="line">        .max = 3400,</div>
<div class="line">    },</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8d0d8fb8a23aac2b6ac6d9e81e7b58e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structsystick.html">systick</a> Systick</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .configuration = &amp;Systick_config,</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4fb87b3684142c82865003df813ef052"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structsystick__config.html">systick_config</a> Systick_config</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .frequency = 1000,</div>
<div class="line">    .auto_start = 1,</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed May 13 2015 18:44:21 for Irrigation test system 1 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
