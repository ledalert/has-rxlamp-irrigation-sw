<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Irrigation test system 1: src/irrigation.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Irrigation test system 1
   </div>
   <div id="projectbrief">Code for using rxlamp v0.90 as irrigation controller</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">irrigation.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="irrigation_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#ifndef _IRRIGATION_H_</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;time.h&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;math.h&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno"><a class="line" href="irrigation_8h.html#a98a17dc46f65ba67eb9c004ea48a9c2d">   11</a></span>&#160;<span class="preprocessor">#define time_delta(a, b) ((float)(a.epoch - b.epoch) + (float)(a.ms - b.ms) / 1000.0)   </span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">enum</span> <a class="code" href="irrigation_8h.html#ac40bd72ec6942e213e454ebcacc92dc7">irrigation_status</a> {</div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="irrigation_8h.html#ac40bd72ec6942e213e454ebcacc92dc7">   23</a></span>&#160;    <a class="code" href="irrigation_8h.html#ac40bd72ec6942e213e454ebcacc92dc7a64e8c241885100a4c6ee0dde8c084093">irrigation_status_REBOOT</a> = -2,          </div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="irrigation_8h.html#ac40bd72ec6942e213e454ebcacc92dc7a64e8c241885100a4c6ee0dde8c084093">   24</a></span>&#160;    <a class="code" href="irrigation_8h.html#ac40bd72ec6942e213e454ebcacc92dc7a3d4b9190b0804578e02247c8cee11d8c">irrigation_status_UNDEFINED</a> = -1,       </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <a class="code" href="irrigation_8h.html#ac40bd72ec6942e213e454ebcacc92dc7a0961e0972792be7ffcb4bf7aa64d4017">irrigation_status_INIT</a>,                 </div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="irrigation_8h.html#ac40bd72ec6942e213e454ebcacc92dc7a0961e0972792be7ffcb4bf7aa64d4017">   27</a></span>&#160;    <a class="code" href="irrigation_8h.html#ac40bd72ec6942e213e454ebcacc92dc7a0421b2d42223b25611688b6d2fe2d6e1">irrigation_status_VALIDATE</a>,             </div>
<div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="irrigation_8h.html#ac40bd72ec6942e213e454ebcacc92dc7a0421b2d42223b25611688b6d2fe2d6e1">   28</a></span>&#160;    <a class="code" href="irrigation_8h.html#ac40bd72ec6942e213e454ebcacc92dc7a1138583e9263588b98c16578bed06987">irrigation_status_MEASURE</a>,              </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;};</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">struct </span><a class="code" href="structirrigation__temperature__sample.html">irrigation_temperature_sample</a> {</div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="structirrigation__temperature__sample.html">   34</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structsw__timer__system__time.html">sw_timer_system_time</a> <a class="code" href="structirrigation__temperature__sample.html#aa10fbbf9f10f89fc9f246f42c26b0ad2">timestamp</a>;  </div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="structirrigation__temperature__sample.html#aa10fbbf9f10f89fc9f246f42c26b0ad2">   35</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="structirrigation__temperature__sample.html#ae72c8bc3c16a24366685eecbf9493a2e">temperature</a>;                      </div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="structirrigation__temperature__sample.html#ae72c8bc3c16a24366685eecbf9493a2e">   36</a></span>&#160;};</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="keyword">enum</span> <a class="code" href="irrigation_8h.html#a9891f6b3b37611d2aebdb8601acdf6c6">moisture_sensor_state</a> {</div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="irrigation_8h.html#a9891f6b3b37611d2aebdb8601acdf6c6">   40</a></span>&#160;    <a class="code" href="irrigation_8h.html#a9891f6b3b37611d2aebdb8601acdf6c6ad3f6b80b71bad74ea52dda2f31231cc3">moisture_sensor_heating</a>,    </div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="irrigation_8h.html#a9891f6b3b37611d2aebdb8601acdf6c6ad3f6b80b71bad74ea52dda2f31231cc3">   41</a></span>&#160;    <a class="code" href="irrigation_8h.html#a9891f6b3b37611d2aebdb8601acdf6c6a7e57547ef4980c1af315fd9937c976f0">moisture_sensor_cooling</a>,    </div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="irrigation_8h.html#a9891f6b3b37611d2aebdb8601acdf6c6a7e57547ef4980c1af315fd9937c976f0">   42</a></span>&#160;    <a class="code" href="irrigation_8h.html#a9891f6b3b37611d2aebdb8601acdf6c6a4460d045ceb966a377b72d2825606fbd">moisture_sensor_t1</a>,         </div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="irrigation_8h.html#a9891f6b3b37611d2aebdb8601acdf6c6a4460d045ceb966a377b72d2825606fbd">   43</a></span>&#160;    moisture_sensor_t2,</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;};</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">struct </span><a class="code" href="structirrigation__controller__status.html">irrigation_controller_status</a> {</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="structirrigation__controller__status.html">   47</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="structirrigation__controller__status.html#a0a4447a8aa2200bacf97bd7e844493c1">dt</a>;                                                   </div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="structirrigation__controller__status.html#a0a4447a8aa2200bacf97bd7e844493c1">   48</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structsw__timer__system__time.html">sw_timer_system_time</a> <a class="code" href="structirrigation__controller__status.html#a1ae5ffb12725754d8309452cf24a2a28">iteration_time</a>;                 </div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="structirrigation__controller__status.html#a1ae5ffb12725754d8309452cf24a2a28">   49</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structsw__timer__system__time.html">sw_timer_system_time</a> <a class="code" href="structirrigation__controller__status.html#ab5a5ed310a96d8fd4db605bad57bf83a">previous_iteration_time</a>;        </div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="structirrigation__controller__status.html#ab5a5ed310a96d8fd4db605bad57bf83a">   50</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="irrigation_8h.html#a9891f6b3b37611d2aebdb8601acdf6c6">moisture_sensor_state</a> sensor_state;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordtype">float</span> ackumulative_delta_temp;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordtype">float</span> ackumulative_delta_time;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordtype">float</span> heating_time;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordtype">float</span> cooling_time;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keyword">struct </span><a class="code" href="structirrigation__temperature__sample.html">irrigation_temperature_sample</a> <a class="code" href="structirrigation__controller__status.html#a3ef3b031a2c91413170ad02626e8da1c">soil_temperature</a>;      </div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="structirrigation__controller__status.html#a3ef3b031a2c91413170ad02626e8da1c">   56</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structirrigation__temperature__sample.html">irrigation_temperature_sample</a> <a class="code" href="structirrigation__controller__status.html#a2d3ef640dc3ec8ce2789fffb092d8f80">last_soil_sample</a>;      </div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="structirrigation__controller__status.html#a2d3ef640dc3ec8ce2789fffb092d8f80">   57</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structirrigation__temperature__sample.html">irrigation_temperature_sample</a> <a class="code" href="structirrigation__controller__status.html#ab795e232c4e2d405b11e24312a6163c3">last_hot_sample</a>;       </div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="structirrigation__controller__status.html#ab795e232c4e2d405b11e24312a6163c3">   58</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structirrigation__temperature__sample.html">irrigation_temperature_sample</a> last_t1_sample;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keyword">struct </span><a class="code" href="structirrigation__temperature__sample.html">irrigation_temperature_sample</a> last_t2_sample;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="structirrigation__controller__status.html#a451e58983d5995bf6f1e00f9318d5dd6">min_temperature</a>;                                      </div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="structirrigation__controller__status.html#a451e58983d5995bf6f1e00f9318d5dd6">   61</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="structirrigation__controller__status.html#a1bd8f83a44ee01d3b7cf3851b6716f02">max_temperature</a>;                                      </div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="structirrigation__controller__status.html#a1bd8f83a44ee01d3b7cf3851b6716f02">   62</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="structirrigation__controller__status.html#a360e7ee7f6ac54635fc66035883d2d9c">validation_timer</a>;                                     </div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="structirrigation__controller__status.html#a360e7ee7f6ac54635fc66035883d2d9c">   63</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="structirrigation__controller__status.html#a9d70c74fe395ec2720089b929a32e1e9">initial_timer</a>;                                        </div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="structirrigation__controller__status.html#a9d70c74fe395ec2720089b929a32e1e9">   64</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="structirrigation__controller__status.html#aab428bb9e677098d336aefd32b5e6232">periodic_temp_report</a>;                                 </div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="structirrigation__controller__status.html#aab428bb9e677098d336aefd32b5e6232">   65</a></span>&#160;};</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keyword">struct </span><a class="code" href="structirrigation__controller.html">irrigation_controller</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="keyword">struct </span><a class="code" href="structirrigation__events.html">irrigation_events</a> {</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="structirrigation__events.html">   71</a></span>&#160;    void (*<a class="code" href="structirrigation__events.html#acc5d9d31cce6888cab54d32463470f07">report_validation_temperatures</a>)(<span class="keyword">struct </span><a class="code" href="structirrigation__controller.html">irrigation_controller</a>*);  </div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="structirrigation__events.html#acc5d9d31cce6888cab54d32463470f07">   72</a></span>&#160;    void (*<a class="code" href="structirrigation__events.html#abafd6872889e6e54648653f690e61ec6">report_sensor_malfunction</a>)(<span class="keyword">struct </span><a class="code" href="structirrigation__controller.html">irrigation_controller</a>*);       </div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="structirrigation__events.html#abafd6872889e6e54648653f690e61ec6">   73</a></span>&#160;    void (*<a class="code" href="structirrigation__events.html#a41db6d6a624689abdb7be82425ff0b02">report_sensor_fluctuations</a>)(<span class="keyword">struct </span><a class="code" href="structirrigation__controller.html">irrigation_controller</a>*);      </div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="structirrigation__events.html#a41db6d6a624689abdb7be82425ff0b02">   74</a></span>&#160;    void (*<a class="code" href="structirrigation__events.html#a47b81edd52377b4c4e1ed512b830e237">report_current_temperature</a>)(<span class="keyword">struct </span><a class="code" href="structirrigation__controller.html">irrigation_controller</a>*);      </div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="structirrigation__events.html#a47b81edd52377b4c4e1ed512b830e237">   75</a></span>&#160;    void (*<a class="code" href="structirrigation__events.html#add396df12f986fff177801aa022c35f2">report_measurement_data</a>)(<span class="keyword">struct </span><a class="code" href="structirrigation__controller.html">irrigation_controller</a>*);         </div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="structirrigation__events.html#add396df12f986fff177801aa022c35f2">   76</a></span>&#160;    void (*<a class="code" href="structirrigation__events.html#aae13c04da50716a2433bebd672d129e2">report_msg_note</a>)(<span class="keyword">struct </span><a class="code" href="structirrigation__controller.html">irrigation_controller</a>*, <span class="keywordtype">char</span>* msg);      </div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="structirrigation__events.html#aae13c04da50716a2433bebd672d129e2">   77</a></span>&#160;};</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keyword">struct </span><a class="code" href="structirrigation__controller.html">irrigation_controller</a> {</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="structirrigation__controller.html">   81</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structirrigation__controller__status.html">irrigation_controller_status</a> <a class="code" href="structirrigation__controller.html#a68a854df15c9234d24f2ad36b990bfa8">status</a>; </div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="structirrigation__controller.html#a68a854df15c9234d24f2ad36b990bfa8">   82</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="irrigation_8h.html#ac40bd72ec6942e213e454ebcacc92dc7">irrigation_status</a> <a class="code" href="structirrigation__controller.html#a80bec16de2d6f98564ed1487dee041c5">current_state</a>;       </div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="structirrigation__controller.html#a80bec16de2d6f98564ed1487dee041c5">   83</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="irrigation_8h.html#ac40bd72ec6942e213e454ebcacc92dc7">irrigation_status</a> <a class="code" href="structirrigation__controller.html#a7e1c5689983d2b8aae434c2d5442c935">pending_state</a>;       </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="structirrigation__controller.html#a7e1c5689983d2b8aae434c2d5442c935">   84</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structirrigation__events.html">irrigation_events</a> events;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordtype">int</span> heater;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordtype">int</span> pump;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;};</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__state__init.html#gaeca2f683660bf42f5258acd6aac353d0">state_init_enter</a>(<span class="keyword">struct</span> <a class="code" href="structirrigation__controller.html">irrigation_controller</a>* controller);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__state__init.html#ga5b5f5a7ec8534a643fb599efdee6ed4f">state_init_run</a>(<span class="keyword">struct</span> <a class="code" href="structirrigation__controller.html">irrigation_controller</a>* controller);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__state__init.html#ga52863e306edb45d15c12acdecb7e5555">state_init_exit</a>(<span class="keyword">struct</span> <a class="code" href="structirrigation__controller.html">irrigation_controller</a>* controller);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__state__validate.html#gac0d41d4685bd461b3a613f6320405b79">state_validate_enter</a>(<span class="keyword">struct</span> <a class="code" href="structirrigation__controller.html">irrigation_controller</a>* controller);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__state__validate.html#gaec38509b93f8a850919aa7a36e543ed5">state_validate_run</a>(<span class="keyword">struct</span> <a class="code" href="structirrigation__controller.html">irrigation_controller</a>* controller);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__state__validate.html#gac480e756742ffd9acd9bd21ac1e8885c">state_validate_exit</a>(<span class="keyword">struct</span> <a class="code" href="structirrigation__controller.html">irrigation_controller</a>* controller);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="keywordtype">void</span> state_reboot_enter(<span class="keyword">struct</span> <a class="code" href="structirrigation__controller.html">irrigation_controller</a>* controller);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="keywordtype">void</span> state_reboot_run(<span class="keyword">struct</span> <a class="code" href="structirrigation__controller.html">irrigation_controller</a>* controller);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="keywordtype">void</span> state_reboot_exit(<span class="keyword">struct</span> <a class="code" href="structirrigation__controller.html">irrigation_controller</a>* controller);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="keywordtype">void</span> state_measure_enter(<span class="keyword">struct</span> <a class="code" href="structirrigation__controller.html">irrigation_controller</a>* controller);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="keywordtype">void</span> state_measure_run(<span class="keyword">struct</span> <a class="code" href="structirrigation__controller.html">irrigation_controller</a>* controller);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="keywordtype">void</span> state_measure_exit(<span class="keyword">struct</span> <a class="code" href="structirrigation__controller.html">irrigation_controller</a>* controller);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="keywordtype">void</span> status_color(<span class="keywordtype">int</span> r, <span class="keywordtype">int</span> g, <span class="keywordtype">int</span> b);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor">#define _IRRIGATION_H_</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="ttc" id="structirrigation__controller__status_html_aab428bb9e677098d336aefd32b5e6232"><div class="ttname"><a href="structirrigation__controller__status.html#aab428bb9e677098d336aefd32b5e6232">irrigation_controller_status::periodic_temp_report</a></div><div class="ttdeci">float periodic_temp_report</div><div class="ttdoc">This is a timer for periodic calls to irrigation_events::report_current_temperature. </div><div class="ttdef"><b>Definition:</b> irrigation.h:65</div></div>
<div class="ttc" id="structirrigation__controller__status_html_a1ae5ffb12725754d8309452cf24a2a28"><div class="ttname"><a href="structirrigation__controller__status.html#a1ae5ffb12725754d8309452cf24a2a28">irrigation_controller_status::iteration_time</a></div><div class="ttdeci">struct sw_timer_system_time iteration_time</div><div class="ttdoc">Timestamp of when this run started. </div><div class="ttdef"><b>Definition:</b> irrigation.h:49</div></div>
<div class="ttc" id="structirrigation__controller__status_html_a9d70c74fe395ec2720089b929a32e1e9"><div class="ttname"><a href="structirrigation__controller__status.html#a9d70c74fe395ec2720089b929a32e1e9">irrigation_controller_status::initial_timer</a></div><div class="ttdeci">float initial_timer</div><div class="ttdoc">This is the timer for Initial state. </div><div class="ttdef"><b>Definition:</b> irrigation.h:64</div></div>
<div class="ttc" id="structirrigation__events_html_a41db6d6a624689abdb7be82425ff0b02"><div class="ttname"><a href="structirrigation__events.html#a41db6d6a624689abdb7be82425ff0b02">irrigation_events::report_sensor_fluctuations</a></div><div class="ttdeci">void(* report_sensor_fluctuations)(struct irrigation_controller *)</div><div class="ttdoc">Report that sensordata fluctuates. </div><div class="ttdef"><b>Definition:</b> irrigation.h:74</div></div>
<div class="ttc" id="structirrigation__events_html"><div class="ttname"><a href="structirrigation__events.html">irrigation_events</a></div><div class="ttdoc">The event callback functions for the irrigation controller core. </div><div class="ttdef"><b>Definition:</b> irrigation.h:71</div></div>
<div class="ttc" id="irrigation_8h_html_ac40bd72ec6942e213e454ebcacc92dc7"><div class="ttname"><a href="irrigation_8h.html#ac40bd72ec6942e213e454ebcacc92dc7">irrigation_status</a></div><div class="ttdeci">irrigation_status</div><div class="ttdoc">This is the state of the irrigation controller. </div><div class="ttdef"><b>Definition:</b> irrigation.h:23</div></div>
<div class="ttc" id="irrigation_8h_html_ac40bd72ec6942e213e454ebcacc92dc7a64e8c241885100a4c6ee0dde8c084093"><div class="ttname"><a href="irrigation_8h.html#ac40bd72ec6942e213e454ebcacc92dc7a64e8c241885100a4c6ee0dde8c084093">irrigation_status_REBOOT</a></div><div class="ttdoc">If something goes terribly wrong we can set this to pending state and force a reboot. </div><div class="ttdef"><b>Definition:</b> irrigation.h:24</div></div>
<div class="ttc" id="irrigation_8h_html_a9891f6b3b37611d2aebdb8601acdf6c6a7e57547ef4980c1af315fd9937c976f0"><div class="ttname"><a href="irrigation_8h.html#a9891f6b3b37611d2aebdb8601acdf6c6a7e57547ef4980c1af315fd9937c976f0">moisture_sensor_cooling</a></div><div class="ttdoc">The sensor is cooling down. </div><div class="ttdef"><b>Definition:</b> irrigation.h:42</div></div>
<div class="ttc" id="group__state__validate_html_gaec38509b93f8a850919aa7a36e543ed5"><div class="ttname"><a href="group__state__validate.html#gaec38509b93f8a850919aa7a36e543ed5">state_validate_run</a></div><div class="ttdeci">void state_validate_run(struct irrigation_controller *controller)</div><div class="ttdoc">We have the heart beat LED status and we update the minimum and maximum values while we continue to s...</div><div class="ttdef"><b>Definition:</b> state_validate.c:26</div></div>
<div class="ttc" id="irrigation_8h_html_ac40bd72ec6942e213e454ebcacc92dc7a1138583e9263588b98c16578bed06987"><div class="ttname"><a href="irrigation_8h.html#ac40bd72ec6942e213e454ebcacc92dc7a1138583e9263588b98c16578bed06987">irrigation_status_MEASURE</a></div><div class="ttdoc">Measure soil water content. </div><div class="ttdef"><b>Definition:</b> irrigation.h:29</div></div>
<div class="ttc" id="structirrigation__controller_html"><div class="ttname"><a href="structirrigation__controller.html">irrigation_controller</a></div><div class="ttdoc">Holds everything related to the irrigation controller. </div><div class="ttdef"><b>Definition:</b> irrigation.h:81</div></div>
<div class="ttc" id="structirrigation__events_html_abafd6872889e6e54648653f690e61ec6"><div class="ttname"><a href="structirrigation__events.html#abafd6872889e6e54648653f690e61ec6">irrigation_events::report_sensor_malfunction</a></div><div class="ttdeci">void(* report_sensor_malfunction)(struct irrigation_controller *)</div><div class="ttdoc">Report that sensordata is invalid. </div><div class="ttdef"><b>Definition:</b> irrigation.h:73</div></div>
<div class="ttc" id="structirrigation__controller__status_html"><div class="ttname"><a href="structirrigation__controller__status.html">irrigation_controller_status</a></div><div class="ttdef"><b>Definition:</b> irrigation.h:47</div></div>
<div class="ttc" id="group__state__init_html_ga52863e306edb45d15c12acdecb7e5555"><div class="ttname"><a href="group__state__init.html#ga52863e306edb45d15c12acdecb7e5555">state_init_exit</a></div><div class="ttdeci">void state_init_exit(struct irrigation_controller *controller)</div><div class="ttdoc">Nothing has do be done before we leave this state. </div><div class="ttdef"><b>Definition:</b> state_init.c:38</div></div>
<div class="ttc" id="structirrigation__controller__status_html_a2d3ef640dc3ec8ce2789fffb092d8f80"><div class="ttname"><a href="structirrigation__controller__status.html#a2d3ef640dc3ec8ce2789fffb092d8f80">irrigation_controller_status::last_soil_sample</a></div><div class="ttdeci">struct irrigation_temperature_sample last_soil_sample</div><div class="ttdoc">Holds the temperature of an initial water content sampling. </div><div class="ttdef"><b>Definition:</b> irrigation.h:57</div></div>
<div class="ttc" id="structirrigation__controller__status_html_ab5a5ed310a96d8fd4db605bad57bf83a"><div class="ttname"><a href="structirrigation__controller__status.html#ab5a5ed310a96d8fd4db605bad57bf83a">irrigation_controller_status::previous_iteration_time</a></div><div class="ttdeci">struct sw_timer_system_time previous_iteration_time</div><div class="ttdoc">Timestamp of previous run, used to calculate dt. </div><div class="ttdef"><b>Definition:</b> irrigation.h:50</div></div>
<div class="ttc" id="structirrigation__temperature__sample_html_aa10fbbf9f10f89fc9f246f42c26b0ad2"><div class="ttname"><a href="structirrigation__temperature__sample.html#aa10fbbf9f10f89fc9f246f42c26b0ad2">irrigation_temperature_sample::timestamp</a></div><div class="ttdeci">struct sw_timer_system_time timestamp</div><div class="ttdoc">Time sample was taken. </div><div class="ttdef"><b>Definition:</b> irrigation.h:35</div></div>
<div class="ttc" id="structirrigation__temperature__sample_html"><div class="ttname"><a href="structirrigation__temperature__sample.html">irrigation_temperature_sample</a></div><div class="ttdoc">This is a timestamped temperature sample. </div><div class="ttdef"><b>Definition:</b> irrigation.h:34</div></div>
<div class="ttc" id="group__state__validate_html_gac480e756742ffd9acd9bd21ac1e8885c"><div class="ttname"><a href="group__state__validate.html#gac480e756742ffd9acd9bd21ac1e8885c">state_validate_exit</a></div><div class="ttdeci">void state_validate_exit(struct irrigation_controller *controller)</div><div class="ttdoc">Nothing has to be done when we exit this state. </div><div class="ttdef"><b>Definition:</b> state_validate.c:66</div></div>
<div class="ttc" id="structirrigation__temperature__sample_html_ae72c8bc3c16a24366685eecbf9493a2e"><div class="ttname"><a href="structirrigation__temperature__sample.html#ae72c8bc3c16a24366685eecbf9493a2e">irrigation_temperature_sample::temperature</a></div><div class="ttdeci">float temperature</div><div class="ttdoc">Temperature. </div><div class="ttdef"><b>Definition:</b> irrigation.h:36</div></div>
<div class="ttc" id="irrigation_8h_html_ac40bd72ec6942e213e454ebcacc92dc7a3d4b9190b0804578e02247c8cee11d8c"><div class="ttname"><a href="irrigation_8h.html#ac40bd72ec6942e213e454ebcacc92dc7a3d4b9190b0804578e02247c8cee11d8c">irrigation_status_UNDEFINED</a></div><div class="ttdoc">This is the default sate but it is also used for the pending state when no pending state is set...</div><div class="ttdef"><b>Definition:</b> irrigation.h:25</div></div>
<div class="ttc" id="structsw__timer__system__time_html"><div class="ttname"><a href="structsw__timer__system__time.html">sw_timer_system_time</a></div><div class="ttdef"><b>Definition:</b> time.h:25</div></div>
<div class="ttc" id="irrigation_8h_html_a9891f6b3b37611d2aebdb8601acdf6c6"><div class="ttname"><a href="irrigation_8h.html#a9891f6b3b37611d2aebdb8601acdf6c6">moisture_sensor_state</a></div><div class="ttdeci">moisture_sensor_state</div><div class="ttdoc">This is the state of the moisture sensor. </div><div class="ttdef"><b>Definition:</b> irrigation.h:40</div></div>
<div class="ttc" id="structirrigation__controller__status_html_a1bd8f83a44ee01d3b7cf3851b6716f02"><div class="ttname"><a href="structirrigation__controller__status.html#a1bd8f83a44ee01d3b7cf3851b6716f02">irrigation_controller_status::max_temperature</a></div><div class="ttdeci">float max_temperature</div><div class="ttdoc">This is the minimum temperature during Sensor validation state. </div><div class="ttdef"><b>Definition:</b> irrigation.h:62</div></div>
<div class="ttc" id="irrigation_8h_html_a9891f6b3b37611d2aebdb8601acdf6c6ad3f6b80b71bad74ea52dda2f31231cc3"><div class="ttname"><a href="irrigation_8h.html#a9891f6b3b37611d2aebdb8601acdf6c6ad3f6b80b71bad74ea52dda2f31231cc3">moisture_sensor_heating</a></div><div class="ttdoc">The sensor is heating up. </div><div class="ttdef"><b>Definition:</b> irrigation.h:41</div></div>
<div class="ttc" id="structirrigation__events_html_aae13c04da50716a2433bebd672d129e2"><div class="ttname"><a href="structirrigation__events.html#aae13c04da50716a2433bebd672d129e2">irrigation_events::report_msg_note</a></div><div class="ttdeci">void(* report_msg_note)(struct irrigation_controller *, char *msg)</div><div class="ttdoc">Generic note as a string, used for debugging. </div><div class="ttdef"><b>Definition:</b> irrigation.h:77</div></div>
<div class="ttc" id="structirrigation__controller__status_html_ab795e232c4e2d405b11e24312a6163c3"><div class="ttname"><a href="structirrigation__controller__status.html#ab795e232c4e2d405b11e24312a6163c3">irrigation_controller_status::last_hot_sample</a></div><div class="ttdeci">struct irrigation_temperature_sample last_hot_sample</div><div class="ttdef"><b>Definition:</b> irrigation.h:58</div></div>
<div class="ttc" id="group__state__init_html_ga5b5f5a7ec8534a643fb599efdee6ed4f"><div class="ttname"><a href="group__state__init.html#ga5b5f5a7ec8534a643fb599efdee6ed4f">state_init_run</a></div><div class="ttdeci">void state_init_run(struct irrigation_controller *controller)</div><div class="ttdoc">We will make a heart beat ramp for the status LED while we wait for initial delay to complete...</div><div class="ttdef"><b>Definition:</b> state_init.c:14</div></div>
<div class="ttc" id="irrigation_8h_html_ac40bd72ec6942e213e454ebcacc92dc7a0421b2d42223b25611688b6d2fe2d6e1"><div class="ttname"><a href="irrigation_8h.html#ac40bd72ec6942e213e454ebcacc92dc7a0421b2d42223b25611688b6d2fe2d6e1">irrigation_status_VALIDATE</a></div><div class="ttdoc">Validate the sensors. </div><div class="ttdef"><b>Definition:</b> irrigation.h:28</div></div>
<div class="ttc" id="structirrigation__controller__status_html_a0a4447a8aa2200bacf97bd7e844493c1"><div class="ttname"><a href="structirrigation__controller__status.html#a0a4447a8aa2200bacf97bd7e844493c1">irrigation_controller_status::dt</a></div><div class="ttdeci">float dt</div><div class="ttdoc">Delta time since last state run. </div><div class="ttdef"><b>Definition:</b> irrigation.h:48</div></div>
<div class="ttc" id="structirrigation__controller_html_a7e1c5689983d2b8aae434c2d5442c935"><div class="ttname"><a href="structirrigation__controller.html#a7e1c5689983d2b8aae434c2d5442c935">irrigation_controller::pending_state</a></div><div class="ttdeci">enum irrigation_status pending_state</div><div class="ttdoc">Pending state in the The main state machine. </div><div class="ttdef"><b>Definition:</b> irrigation.h:84</div></div>
<div class="ttc" id="structirrigation__controller__status_html_a3ef3b031a2c91413170ad02626e8da1c"><div class="ttname"><a href="structirrigation__controller__status.html#a3ef3b031a2c91413170ad02626e8da1c">irrigation_controller_status::soil_temperature</a></div><div class="ttdeci">struct irrigation_temperature_sample soil_temperature</div><div class="ttdoc">Last soil temperature measured. </div><div class="ttdef"><b>Definition:</b> irrigation.h:56</div></div>
<div class="ttc" id="structirrigation__controller_html_a80bec16de2d6f98564ed1487dee041c5"><div class="ttname"><a href="structirrigation__controller.html#a80bec16de2d6f98564ed1487dee041c5">irrigation_controller::current_state</a></div><div class="ttdeci">enum irrigation_status current_state</div><div class="ttdoc">Current state in the The main state machine. </div><div class="ttdef"><b>Definition:</b> irrigation.h:83</div></div>
<div class="ttc" id="irrigation_8h_html_ac40bd72ec6942e213e454ebcacc92dc7a0961e0972792be7ffcb4bf7aa64d4017"><div class="ttname"><a href="irrigation_8h.html#ac40bd72ec6942e213e454ebcacc92dc7a0961e0972792be7ffcb4bf7aa64d4017">irrigation_status_INIT</a></div><div class="ttdoc">Initialize the system. </div><div class="ttdef"><b>Definition:</b> irrigation.h:27</div></div>
<div class="ttc" id="structirrigation__controller_html_a68a854df15c9234d24f2ad36b990bfa8"><div class="ttname"><a href="structirrigation__controller.html#a68a854df15c9234d24f2ad36b990bfa8">irrigation_controller::status</a></div><div class="ttdeci">struct irrigation_controller_status status</div><div class="ttdoc">Status and measurements. </div><div class="ttdef"><b>Definition:</b> irrigation.h:82</div></div>
<div class="ttc" id="group__state__validate_html_gac0d41d4685bd461b3a613f6320405b79"><div class="ttname"><a href="group__state__validate.html#gac0d41d4685bd461b3a613f6320405b79">state_validate_enter</a></div><div class="ttdeci">void state_validate_enter(struct irrigation_controller *controller)</div><div class="ttdoc">We set up the validation timer and init the maximum and minim temperatured. </div><div class="ttdef"><b>Definition:</b> state_validate.c:10</div></div>
<div class="ttc" id="irrigation_8h_html_a9891f6b3b37611d2aebdb8601acdf6c6a4460d045ceb966a377b72d2825606fbd"><div class="ttname"><a href="irrigation_8h.html#a9891f6b3b37611d2aebdb8601acdf6c6a4460d045ceb966a377b72d2825606fbd">moisture_sensor_t1</a></div><div class="ttdef"><b>Definition:</b> irrigation.h:43</div></div>
<div class="ttc" id="structirrigation__events_html_add396df12f986fff177801aa022c35f2"><div class="ttname"><a href="structirrigation__events.html#add396df12f986fff177801aa022c35f2">irrigation_events::report_measurement_data</a></div><div class="ttdeci">void(* report_measurement_data)(struct irrigation_controller *)</div><div class="ttdoc">Report water content data. </div><div class="ttdef"><b>Definition:</b> irrigation.h:76</div></div>
<div class="ttc" id="structirrigation__controller__status_html_a451e58983d5995bf6f1e00f9318d5dd6"><div class="ttname"><a href="structirrigation__controller__status.html#a451e58983d5995bf6f1e00f9318d5dd6">irrigation_controller_status::min_temperature</a></div><div class="ttdeci">float min_temperature</div><div class="ttdoc">This is the minimum temperature during Sensor validation state. </div><div class="ttdef"><b>Definition:</b> irrigation.h:61</div></div>
<div class="ttc" id="structirrigation__events_html_a47b81edd52377b4c4e1ed512b830e237"><div class="ttname"><a href="structirrigation__events.html#a47b81edd52377b4c4e1ed512b830e237">irrigation_events::report_current_temperature</a></div><div class="ttdeci">void(* report_current_temperature)(struct irrigation_controller *)</div><div class="ttdoc">Reports current temperature. </div><div class="ttdef"><b>Definition:</b> irrigation.h:75</div></div>
<div class="ttc" id="structirrigation__events_html_acc5d9d31cce6888cab54d32463470f07"><div class="ttname"><a href="structirrigation__events.html#acc5d9d31cce6888cab54d32463470f07">irrigation_events::report_validation_temperatures</a></div><div class="ttdeci">void(* report_validation_temperatures)(struct irrigation_controller *)</div><div class="ttdoc">Report the measured temperatures for validation. </div><div class="ttdef"><b>Definition:</b> irrigation.h:72</div></div>
<div class="ttc" id="group__state__init_html_gaeca2f683660bf42f5258acd6aac353d0"><div class="ttname"><a href="group__state__init.html#gaeca2f683660bf42f5258acd6aac353d0">state_init_enter</a></div><div class="ttdeci">void state_init_enter(struct irrigation_controller *controller)</div><div class="ttdoc">Reset all variables in the controller this state uses. </div><div class="ttdef"><b>Definition:</b> state_init.c:8</div></div>
<div class="ttc" id="structirrigation__controller__status_html_a360e7ee7f6ac54635fc66035883d2d9c"><div class="ttname"><a href="structirrigation__controller__status.html#a360e7ee7f6ac54635fc66035883d2d9c">irrigation_controller_status::validation_timer</a></div><div class="ttdeci">float validation_timer</div><div class="ttdoc">This is the timer for Sensor validation state. </div><div class="ttdef"><b>Definition:</b> irrigation.h:63</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed May 13 2015 18:44:21 for Irrigation test system 1 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
